<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reyna's Learning Dashboard - 01/13</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="dashboard.css">
    <style>
        /* é‡å°ç¨‹å¼ç¢¼å€å¡Šçš„é¡å¤–å„ªåŒ– */
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            margin-top: 10px;
            white-space: pre-wrap;
        }
        .code-comment { color: #75715e; }
        .code-keyword { color: #ff79c6; font-weight: bold; }
        .code-function { color: #8be9fd; }
        .code-string { color: #f1fa8c; }
        .code-number { color: #bd93f9; }
        .code-class { color: #50fa7b; font-weight: bold; }
        
        .alert-box {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            color: #856404;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .concept-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        .concept-table th, .concept-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .concept-table th {
            background-color: #f4f4f4;
            color: #333;
        }
        
        /* ç‰ˆæœ¬æ¨™ç±¤ */
        .ver-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .ver-1 { background-color: #e0f2f1; color: #00695c; border: 1px solid #b2dfdb; }
        .ver-2 { background-color: #fff3e0; color: #ef6c00; border: 1px solid #ffe0b2; }
        .ver-3 { background-color: #f3e5f5; color: #8e24aa; border: 1px solid #e1bee7; }
        .ver-4 { background-color: #e8eaf6; color: #3f51b5; border: 1px solid #c5cae9; }
    </style>
</head>
<body>

    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="overlay" onclick="toggleSidebar()"></div>

    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>Reyna Portfolio</h2>
            <span>Web Design Practice</span>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 1: åŸºç¤å°å…¥</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1222.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/22 (ä¸€)</span><span class="topic">é›»è…¦åŸºç¤æ¦‚è«–</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1223_1.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/23 (äºŒ) am</span><span class="topic">IT Career è·æ¶¯è§£æ</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1223_2.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/23 (äºŒ) pm</span><span class="topic">ESP-01S èˆ‡ Arduino</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1224_1.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/24 (ä¸‰) am</span><span class="topic">IoT èˆ‡ Web Server å¯¦ä½œ</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1224_2.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/24 (ä¸‰) pm</span><span class="topic">Linux ç³»çµ±èˆ‡æ‡‰ç”¨</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1226.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/26 (äº”)</span><span class="topic">LinuxåŸºç¤åˆ°æ¶ç«™</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 2: æ·±å…¥å¯¦ä½œ</div>
            <ul>
                 <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1229.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/29 (ä¸€)</span><span class="topic">é›»è…¦åŸºç¤æ¦‚è«– II</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1230.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/30 (äºŒ)</span><span class="topic">NoCode è³‡æ–™è’é›†èˆ‡è‡ªå‹•åŒ–</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1231.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/31 (ä¸‰)</span><span class="topic">Linux è³‡æ–™åº«å»ºç½®</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0102.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/2 (äº”)</span><span class="topic">Linux ç³»çµ±ç®¡ç†èˆ‡è…³æœ¬</span></a></li>
            </ul>
        </div>
        
        <div class="menu-group">
            <div class="group-title">Week 3: è³‡æ–™åº«èˆ‡ Python</div>
            <ul>
                <li><a href="#"><span class="date-badge"><i class="far fa-calendar"></i> 1/5 (ä¸€)</span><span class="topic">è¨ˆç®—æ©Ÿæ¦‚è«– (å¾…è£œ)</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0106.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/6 (äºŒ)</span><span class="topic">MySQL å®‰è£èˆ‡ SSH ç©¿éš§</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0107.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/7 (ä¸‰)</span><span class="topic">MySQL ç®¡ç†èˆ‡ VS Code</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0108.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/8 (å››)</span><span class="topic">Python åŸºç¤èˆ‡ç’°å¢ƒ</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0109.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/9 (äº”)</span><span class="topic">Python é€²éšèˆ‡è³‡æ–™è™•ç†</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 4: Python èˆ‡ SQL</div>
            <ul>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0112.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/12 (ä¸€) </span>
                        <span class="topic">Python å‡½æ•¸èˆ‡ç•°å¸¸è™•ç†</span>
                    </a>
                </li>
                <li class="active">
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0113.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/13 (äºŒ) </span>
                        <span class="topic">OOP èˆ‡ è¨˜æ†¶é«”ç®¡ç†</span>
                    </a>
                </li>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0114.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/14 (ä¸‰) </span>
                        <span class="topic">MySQL èªæ³•èˆ‡è³‡æ–™æ“ä½œ</span>
                    </a>
                </li>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0115.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/15 (å››) </span>
                        <span class="topic">MySQL é€²éšæŸ¥è©¢èˆ‡å¯¦ä½œ</span>
                    </a>
                </li>
            </ul>
        </div>

         <div class="menu-group">
            <div class="group-title">Week 5: å•†æ¥­æ™ºæ…§èˆ‡ç¶²é åŸºç¤</div>
            <ul><li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0120.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/20 (äºŒ) </span><span class="topic">Tableau åŸºç¤èˆ‡è¦–è¦ºåŒ–</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0121.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/21 (ä¸‰) </span><span class="topic">Tableau é€²éšåˆ†æ</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0122.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/22 (å››) </span><span class="topic">HTML åŸºç¤èˆ‡è¡¨å–®è¨­è¨ˆ</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0123.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/23 (äº”) </span><span class="topic">CSS æ¨£å¼è¨­è¨ˆå…¨æ”»ç•¥</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 6: ç¶²è·¯çˆ¬èŸ²èˆ‡è³‡æ–™æ“·å–</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0126.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/26 (ä¸€) </span><span class="topic">ç¶²è·¯çˆ¬èŸ²åŸºç¤èˆ‡ requests</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0127.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/27 (äºŒ) </span><span class="topic">Selenium å‹•æ…‹çˆ¬èŸ²</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 7: è³‡æ–™åˆ†æèˆ‡ Pandas</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0202.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/2 (ä¸€) </span><span class="topic">Pandas åŸºç¤èˆ‡è³‡æ–™çµæ§‹</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0203.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/3 (äºŒ) </span><span class="topic">Pandas é€²éšèˆ‡ NumPy</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0204.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/4 (ä¸‰) </span><span class="topic">NumPy é€²éšèˆ‡ç¶­åº¦æ“ä½œ</span></a></li>
            </ul>
        </div>

    </nav>

   <main class="main-content">
     
        <div class="top-bar">
            <div class="breadcrumb">
                é¦–é  > Week 4 > <span>OOP èˆ‡ è¨˜æ†¶é«”ç®¡ç†</span>
            </div>
            <a href="https://ruinuo217.github.io/Portfolio/" class="btn-nav" style="text-decoration: none;">
                <i class="fas fa-home"></i> å›é¦–é 
            </a>
        </div>
        
        <div class="banner" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);">
            <div>
                <h1>ç‰©ä»¶å°å‘èˆ‡è¨˜æ†¶é«”ç®¡ç†</h1>
                <p>Class é¡åˆ¥å¯¦ä½œã€è®Šæ•¸ä½œç”¨åŸŸ (LEGB)ã€Mutable é™·é˜±èˆ‡äºŒç¶­é™£åˆ—ã€‚</p>
            </div>
            <i class="fa-solid fa-cubes banner-icon"></i>
        </div>

        <h3 class="section-title">Part 1: ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-car"></i> Class é¡åˆ¥å¯¦ä½œç·´ç¿’</h4>
                    <span class="status-badge running">å¯¦ä½œ</span>
                </div>
                <p class="note-desc">å®šç¾©ä¸€å€‹ Car é¡åˆ¥ï¼ŒåŒ…å«å±¬æ€§åˆå§‹åŒ–èˆ‡æ–¹æ³• (Method)ã€‚</p>
                <pre><code><span class="code-keyword">class</span> <span class="code-class">Car</span>:
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>, brand, model, year):
        <span class="code-keyword">self</span>.brand = brand
        <span class="code-keyword">self</span>.model = model
        <span class="code-keyword">self</span>.year = year

    <span class="code-keyword">def</span> <span class="code-function">a</span>(<span class="code-keyword">self</span>):
        <span class="code-function">print</span>(f<span class="code-string">"è»Š: {self.brand} {self.model} ({self.year})"</span>)

    <span class="code-keyword">def</span> <span class="code-function">update_year</span>(<span class="code-keyword">self</span>, new_year):
        <span class="code-keyword">self</span>.year = new_year
        <span class="code-function">print</span>(f<span class="code-string">"æ–°å¹´: {self.year}"</span>)
        
    <span class="code-keyword">def</span> <span class="code-function">update_model</span>(<span class="code-keyword">self</span>, new_model):
        <span class="code-keyword">self</span>.model = new_model
        <span class="code-function">print</span>(f<span class="code-string">"æ–°è»Š: {self.model}"</span>)

<span class="code-comment"># å¯¦ä¾‹åŒ–èˆ‡æ“ä½œ</span>
my_car = Car(<span class="code-string">"Toyota"</span>, <span class="code-string">"Corolla"</span>, <span class="code-number">2020</span>)
my_car.a()

my_car.update_year(<span class="code-number">2026</span>)
my_car.a()

my_car.update_model(<span class="code-string">"Rev4"</span>)
my_car.a()</code></pre>
            </div>
        </div>

        <h3 class="section-title">Part 2: è®Šæ•¸ç”Ÿå‘½é€±æœŸ (Scope)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-layer-group"></i> LEGB æŸ¥æ‰¾è¦å‰‡</h4>
                    <span class="status-badge done">è§€å¿µ</span>
                </div>
                <p class="note-desc">Python è®Šæ•¸æŸ¥æ‰¾é †åºï¼šç”±å…§è€Œå¤–ã€‚</p>
                <table class="concept-table">
                    <tr><th>ä»£è™Ÿ</th><th>æ„ç¾©</th><th>èªªæ˜</th></tr>
                    <tr><td><strong>L</strong></td><td>Local</td><td>å‡½å¼å…§éƒ¨</td></tr>
                    <tr><td><strong>E</strong></td><td>Enclosing</td><td>å¤–éƒ¨å·¢ç‹€å‡½å¼</td></tr>
                    <tr><td><strong>G</strong></td><td>Global</td><td>å…¨åŸŸ (æ¨¡çµ„å±¤ç´š)</td></tr>
                    <tr><td><strong>B</strong></td><td>Built-in</td><td>å…§å»º (å¦‚ print)</td></tr>
                </table>
            </div>

            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-ban"></i> é¿å…ä½¿ç”¨ Global</h4>
                    <span class="status-badge important">æœ€ä½³å¯¦è¸</span>
                </div>
                <p class="note-desc">ä¸è¦ç›´æ¥åœ¨å‡½å¼å…§ä¿®æ”¹ Global è®Šæ•¸ï¼Œæ‡‰ä½¿ç”¨ <strong>åƒæ•¸å‚³é</strong> èˆ‡ <strong>Return</strong>ã€‚</p>
                <pre><code>s = <span class="code-number">1</span>

<span class="code-keyword">def</span> <span class="code-function">add</span>(a):
    b = a + <span class="code-number">2</span>
    <span class="code-keyword">return</span> b

<span class="code-comment"># æ­£ç¢ºåšæ³•ï¼šç”¨è®Šæ•¸æ¥ä½å›å‚³å€¼</span>
s = add(s) 
<span class="code-function">print</span>(s) <span class="code-comment"># è¼¸å‡º 3</span></code></pre>
            </div>
        </div>

        <h3 class="section-title">Part 3: è¨˜æ†¶é«”èˆ‡ Mutable é™·é˜±</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-microchip"></i> Call by Assignment (æŒ‡æ´¾å¼å‘¼å«)</h4>
                    <span class="status-badge important">æ ¸å¿ƒ</span>
                </div>
                <p class="note-desc">è§€å¯Ÿå‚³å…¥ Function å¾Œï¼ŒList (å¯è®Š) èˆ‡ Int (ä¸å¯è®Š) çš„è¡Œç‚ºå·®ç•°ã€‚</p>
                <pre><code>x = <span class="code-number">10</span>
y = [<span class="code-number">10</span>]

<span class="code-keyword">def</span> <span class="code-function">modify</span>(a, b):
    a += <span class="code-number">5</span>      <span class="code-comment"># Integer æ˜¯ä¸å¯è®Šçš„ï¼Œé€™è£¡ a è®Šæˆäº†æ–°çš„ç‰©ä»¶ (Re-assign)ï¼Œä¸å½±éŸ¿å¤–éƒ¨ x</span>
    b += [<span class="code-number">5</span>]    <span class="code-comment"># List æ˜¯å¯è®Šçš„ï¼Œ+= æœƒç›´æ¥ä¿®æ”¹åŸç‰©ä»¶ (In-place update)</span>

modify(x, y)
<span class="code-function">print</span>(x)  <span class="code-comment"># 10 (æ²’è®Š)</span>
<span class="code-function">print</span>(y)  <span class="code-comment"># [10, 5] (è®Šäº†ï¼)</span></code></pre>
                <div class="alert-box">
                    <strong>çµè«–ï¼š</strong> å‚³å…¥ Mutable ç‰©ä»¶ (å¦‚ List) æ™‚è¦å°å¿ƒï¼Œå‡½å¼å…§çš„ä¿®æ”¹å¯èƒ½æœƒå½±éŸ¿åˆ°å¤–éƒ¨è®Šæ•¸ã€‚
                </div>
            </div>
        </div>

        <h3 class="section-title">Part 4: è³‡æ–™çµæ§‹ - äºŒç¶­é™£åˆ—</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-table-cells"></i> çŸ©é™£å¯¦ä½œ (Nested Loop)</h4>
                    <span class="status-badge running">æ¼”ç®—æ³•</span>
                </div>
                <p class="note-desc">ä½¿ç”¨å·¢ç‹€è¿´åœˆå»ºç«‹ 3x4 çš„äºŒç¶­é™£åˆ—ã€‚</p>
                <pre><code>rows = <span class="code-number">3</span>
cols = <span class="code-number">4</span>
matrix = []
count = <span class="code-number">1</span>

<span class="code-keyword">for</span> i <span class="code-keyword">in</span> <span class="code-function">range</span>(rows):       <span class="code-comment"># å¤–å±¤ï¼šæ§åˆ¶åˆ— (Row)</span>
    row = []
    <span class="code-keyword">for</span> j <span class="code-keyword">in</span> <span class="code-function">range</span>(cols):   <span class="code-comment"># å…§å±¤ï¼šæ§åˆ¶è¡Œ (Col)</span>
        row.append(count)
        count += <span class="code-number">1</span>
    matrix.append(row)

<span class="code-function">print</span>(matrix)
<span class="code-comment"># è¼¸å‡º: [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]]</span></code></pre>
            </div>
        </div>

        <h3 class="section-title">Homework: è­¦å ±ç‹€æ…‹æ©Ÿè¨­è¨ˆ</h3>
        <div class="dashboard-grid notes-section">
            
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code-branch"></i> Version 1: åŸºç¤ç‹€æ…‹æ©Ÿ</h4>
                    <span class="ver-badge ver-1">V1</span>
                </div>
                <p class="note-desc">é‡é»ï¼šå¯¦ä½œ <code>IDLE</code>, <code>MONITORING</code>, <code>STOPPED</code> ç‹€æ…‹åˆ‡æ›èˆ‡ç•°å¸¸é˜²è­·ã€‚</p>
                <pre><code><span class="code-keyword">import</span> logging
logging.basicConfig(
    level=logging.INFO, 
    format=<span class="code-string">'%(asctime)s - [%(levelname)s] - %(message)s'</span>,
    datefmt=<span class="code-string">'%Y-%m-%d %H:%M:%S'</span> <span class="code-comment"># å¹´-æœˆ-æ—¥ æ™‚:åˆ†:ç§’</span>
)

<span class="code-keyword">class</span> <span class="code-class">AlertStateMachine</span>:
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = <span class="code-string">"IDLE"</span> 

    <span class="code-comment"># [å‹•ä½œ] a: å•Ÿå‹•ç›£æ§</span>
    <span class="code-keyword">def</span> <span class="code-function">a</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = <span class="code-string">"MONITORING"</span>
        logging.info(<span class="code-string">"ç³»çµ±ã€å•Ÿå‹•ç›£æ§ä¸­ã€‘"</span>) <span class="code-comment"># Status -> MONITORING</span>

    <span class="code-comment"># [å‹•ä½œ] c: å¼·åˆ¶åœæ­¢</span>
    <span class="code-keyword">def</span> <span class="code-function">c</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = <span class="code-string">"STOPPED"</span>
        logging.warning(<span class="code-string">"ç³»çµ±ã€å¼·åˆ¶åœæ­¢ã€‘"</span>)

    <span class="code-comment"># [æ ¸å¿ƒ] b: è™•ç†äº‹ä»¶</span>
    <span class="code-keyword">def</span> <span class="code-function">b</span>(<span class="code-keyword">self</span>, event):
        source = event.get(<span class="code-string">"source"</span>, <span class="code-string">"æœªçŸ¥ä¾†æº"</span>)
        e_type = event.get(<span class="code-string">"type"</span>, <span class="code-string">"æœªçŸ¥é¡å‹"</span>)
        confidence = event.get(<span class="code-string">"confidence"</span>, <span class="code-number">0</span>)

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"IDLE"</span>: <span class="code-comment"># 1. IDLE ç‹€æ…‹ï¼šå ±éŒ¯</span>
            msg = f<span class="code-string">"ç³»çµ±ã€éŒ¯èª¤ã€‘ï¼Œç‹€æ…‹ï¼š {self.state} | ä¾†æº: {source}"</span>
            logging.error(msg)
            <span class="code-keyword">raise</span> <span class="code-function">Exception</span>(msg)

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"STOPPED"</span>: <span class="code-comment"># 2. STOPPED ç‹€æ…‹</span>
            logging.warning(f<span class="code-string">"ç³»çµ±ã€å·²åœæ­¢ã€‘ï¼Œç‹€æ…‹ï¼š {self.state} | ä¾†æº: {source}"</span>)
            <span class="code-keyword">return</span> 

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"ALERTING"</span>: <span class="code-comment"># 3. ALERTING ç‹€æ…‹ï¼šå¿½ç•¥å¾ŒçºŒäº‹ä»¶</span>
            logging.info(f<span class="code-string">"ç³»çµ±ã€å¿™ç¢Œä¸­ã€‘ï¼Œå¿½ç•¥ä¾†è‡ª {source} çš„äº‹ä»¶"</span>)
            <span class="code-keyword">return</span>

        <span class="code-keyword">if</span> e_type == <span class="code-string">"å…¥ä¾µ"</span> <span class="code-keyword">and</span> confidence >= <span class="code-number">0.8</span>:  <span class="code-comment"># å¿…é ˆæ˜¯ã€Œå…¥ä¾µã€ä¸”ã€Œä¿¡å¿ƒ >= 0.8ã€æ‰è§¸ç™¼</span>
            <span class="code-keyword">self</span>.state = <span class="code-string">"ALERTING"</span>
            logging.critical(f<span class="code-string">"ç³»çµ±ã€è­¦å‘Šã€‘{e_type} | ä¾†æº: {source} | ä¿¡å¿ƒåº¦: {confidence}"</span>)
        <span class="code-keyword">else</span>:  <span class="code-comment"># æ²’è§¸ç™¼</span>
            logging.info(f<span class="code-string">"ç³»çµ±ã€å®‰å…¨æˆ–å…¶ä»–ã€‘| ä¾†æº: {source} | ä¿¡å¿ƒåº¦: {confidence}"</span>)

<span class="code-comment"># --- æ¸¬è©¦å€ ---</span>
<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ 1: æ­£å¸¸æŠ“åˆ°å…¥ä¾µ (é«˜ä¿¡å¿ƒ)"</span>)
s1 = AlertStateMachine()
s1.a() 
s1.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam01"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.92</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ 2: å…¥ä¾µ (ä½ä¿¡å¿ƒ)"</span>)
s2 = AlertStateMachine()
s2.a() 
s2.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam02"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.4</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ 3: IDLE ç‹€æ…‹èª¤è§¸ (é æœŸå ±éŒ¯)"</span>)
s3 = AlertStateMachine()
<span class="code-keyword">try</span>:
    s3.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam03"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.9</span>})
<span class="code-keyword">except</span> <span class="code-function">Exception</span> <span class="code-keyword">as</span> e:
    <span class="code-function">print</span>(f<span class="code-string">"(å¤–éƒ¨æ””æˆªåˆ° Exception: {e})"</span>)

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ 4: è­¦å ±éŸ¿èµ·å¾Œï¼Œå¿½ç•¥å¾ŒçºŒäº‹ä»¶"</span>)
s4 = AlertStateMachine()
s4.a() 
s4.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam04"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.95</span>}) 
s4.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam05"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.3</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ 5: STOPPED ç‹€æ…‹ (ç´€éŒ„ Log ä½†ä¸å´©æ½°)"</span>)
s5 = AlertStateMachine()
s5.c() 
s5.b({<span class="code-string">"source"</span>: <span class="code-string">"Cam_Backdoor"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.99</span>})

<span class="code-function">print</span>(<span class="code-string">"\n--- å…¨éƒ¨æ¸¬è©¦å®Œæˆ ---"</span>)</code></pre>
            </div>

            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-list-check"></i> Version 2: å¤šé‡æ¢ä»¶åˆ¤æ–·</h4>
                    <span class="ver-badge ver-2">V2</span>
                </div>
                <p class="note-desc">é‡é»ï¼šä½¿ç”¨ <code>if-elif-else</code> çµæ§‹ï¼Œé‡å°ã€Œå…¥ä¾µã€ã€ã€Œç«ç½ã€ã€ã€Œè·Œå€’ã€è™•ç†ä¸åŒçš„é–€æª»å€¼ã€‚</p>
                <pre><code><span class="code-keyword">import</span> logging

logging.basicConfig(
    level=logging.INFO, 
    format=<span class="code-string">'%(asctime)s - [%(levelname)s] - %(message)s'</span>,
    datefmt=<span class="code-string">'%Y-%m-%d %H:%M:%S'</span>
)

<span class="code-keyword">class</span> <span class="code-class">AlertStateMachine</span>:
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = <span class="code-string">"IDLE"</span> 

    <span class="code-keyword">def</span> <span class="code-function">a</span>(<span class="code-keyword">self</span>): <span class="code-comment"># å•Ÿå‹•</span>
        <span class="code-keyword">self</span>.state = <span class="code-string">"MONITORING"</span>
        logging.info(<span class="code-string">"ç³»çµ±ã€å•Ÿå‹•ç›£æ§ä¸­ã€‘"</span>) 

    <span class="code-keyword">def</span> <span class="code-function">c</span>(<span class="code-keyword">self</span>): <span class="code-comment"># åœæ­¢</span>
        <span class="code-keyword">self</span>.state = <span class="code-string">"STOPPED"</span>
        logging.warning(<span class="code-string">"ç³»çµ±ã€å¼·åˆ¶åœæ­¢ã€‘"</span>)

    <span class="code-keyword">def</span> <span class="code-function">b</span>(<span class="code-keyword">self</span>, event): <span class="code-comment"># è™•ç†äº‹ä»¶</span>
        source = event.get(<span class="code-string">"source"</span>, <span class="code-string">"æœªçŸ¥ä¾†æº"</span>)
        e_type = event.get(<span class="code-string">"type"</span>, <span class="code-string">"æœªçŸ¥é¡å‹"</span>)
        confidence = event.get(<span class="code-string">"confidence"</span>, <span class="code-number">0</span>)

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"IDLE"</span>: 
            msg = f<span class="code-string">"ç³»çµ±ã€éŒ¯èª¤ã€‘ï¼Œç‹€æ…‹ï¼š {self.state} | ä¾†æº: {source}"</span>
            logging.error(msg)
            <span class="code-keyword">raise</span> <span class="code-function">Exception</span>(msg)

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"STOPPED"</span>: 
            logging.warning(f<span class="code-string">"ç³»çµ±ã€å·²åœæ­¢ã€‘ï¼Œç‹€æ…‹ï¼š {self.state} | ä¾†æº: {source}"</span>)
            <span class="code-keyword">return</span> 

        <span class="code-keyword">if</span> <span class="code-keyword">self</span>.state == <span class="code-string">"ALERTING"</span>: 
            logging.info(f<span class="code-string">"ç³»çµ±ã€å¿™ç¢Œä¸­ã€‘ï¼Œå¿½ç•¥ä¾†è‡ª {source} çš„äº‹ä»¶"</span>)
            <span class="code-keyword">return</span>

        <span class="code-comment"># --- äº‹ä»¶é‚è¼¯ ---</span>

        <span class="code-comment"># æƒ…æ³ A: å…¥ä¾µ (ä¿¡å¿ƒ >= 0.8)</span>
        <span class="code-keyword">if</span> e_type == <span class="code-string">"å…¥ä¾µ"</span> <span class="code-keyword">and</span> confidence >= <span class="code-number">0.8</span>:
            <span class="code-keyword">self</span>.state = <span class="code-string">"ALERTING"</span>
            logging.critical(f<span class="code-string">"ç³»çµ±ã€å…¥ä¾µè­¦å ±ã€‘(æƒ…æ³A) | ä¾†æº: {source} | æŠ“å°å·ï¼"</span>)
            
        <span class="code-comment"># æƒ…æ³ B: ç«ç½ (ä¿¡å¿ƒ >= 0.5)</span>
        <span class="code-keyword">elif</span> e_type == <span class="code-string">"ç«ç½"</span> <span class="code-keyword">and</span> confidence >= <span class="code-number">0.5</span>:
            <span class="code-keyword">self</span>.state = <span class="code-string">"ALERTING"</span>
            logging.critical(f<span class="code-string">"ç³»çµ±ã€ç«ç½è­¦å ±ã€‘(æƒ…æ³B) | ä¾†æº: {source} | å¿«é€ƒå•Šï¼"</span>)
            
        <span class="code-comment"># æƒ…æ³ C: è·Œå€’ (ä¿¡å¿ƒ >= 0.9)</span>
        <span class="code-keyword">elif</span> e_type == <span class="code-string">"è·Œå€’"</span> <span class="code-keyword">and</span> confidence >= <span class="code-number">0.9</span>:
            <span class="code-keyword">self</span>.state = <span class="code-string">"ALERTING"</span>
            logging.critical(f<span class="code-string">"ç³»çµ±ã€è·Œå€’è­¦å ±ã€‘(æƒ…æ³C) | ä¾†æº: {source} | è«‹æ´¾æ•‘è­·è»Š"</span>)
            
        <span class="code-comment"># æƒ…æ³ D: å…¶ä»–/å¿½ç•¥ (æ²’é¸ä¸Š)</span>
        <span class="code-keyword">else</span>:
            logging.info(f<span class="code-string">"ç³»çµ±ã€å¿½ç•¥/å®‰å…¨ã€‘(æƒ…æ³D) | é¡å‹: {e_type} | ä¿¡å¿ƒ: {confidence}"</span>)


<span class="code-comment"># --- é‡å° A, B, C, D çš„ç¨ç«‹æ¸¬è©¦ ---</span>

<span class="code-function">print</span>(<span class="code-string">"\n--- é–‹å§‹ ABCD æ¸¬è©¦ ---\n"</span>)

<span class="code-function">print</span>(<span class="code-string">"æ¸¬è©¦ A: å…¥ä¾µ (ä¿¡å¿ƒ 0.85 -> æ‡‰è§¸ç™¼)"</span>)
s_a = AlertStateMachine()
s_a.a()
s_a.b({<span class="code-string">"source"</span>: <span class="code-string">"å¤§é–€å£"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.85</span>})

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ B: ç«ç½ (ä¿¡å¿ƒ 0.6 -> æ‡‰è§¸ç™¼)"</span>)
s_b = AlertStateMachine()
s_b.a()
s_b.b({<span class="code-string">"source"</span>: <span class="code-string">"å»šæˆ¿"</span>, <span class="code-string">"type"</span>: <span class="code-string">"ç«ç½"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.6</span>})

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ C: è·Œå€’ (ä¿¡å¿ƒ 0.95 -> æ‡‰è§¸ç™¼)"</span>)
s_c = AlertStateMachine()
s_c.a()
s_c.b({<span class="code-string">"source"</span>: <span class="code-string">"è‡¥å®¤"</span>, <span class="code-string">"type"</span>: <span class="code-string">"è·Œå€’"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.95</span>})

<span class="code-function">print</span>(<span class="code-string">"\næ¸¬è©¦ D: å¿½ç•¥ (ä¿¡å¿ƒä¸è¶³æˆ–æœªçŸ¥é¡å‹)"</span>)
s_d = AlertStateMachine()
s_d.a()
s_d.b({<span class="code-string">"source"</span>: <span class="code-string">"å®¢å»³"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.3</span>}) <span class="code-comment"># ä¿¡å¿ƒä¸è¶³</span>
s_d.b({<span class="code-string">"source"</span>: <span class="code-string">"å®¢å»³"</span>, <span class="code-string">"type"</span>: <span class="code-string">"è²“å’ªè·¯é"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.9</span>}) <span class="code-comment"># æœªçŸ¥é¡å‹</span>

<span class="code-function">print</span>(<span class="code-string">"\n--- æ¸¬è©¦çµæŸ ---"</span>)</code></pre>
            </div>

            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-gears"></i> Version 3: å­—å…¸é©…å‹•è¨­è¨ˆ (Config-Driven)</h4>
                    <span class="ver-badge ver-3">V3</span>
                </div>
                <p class="note-desc">é‡é»ï¼šå°‡é‚è¼¯æŠ½é›¢è‡³ <code>EVENT_RULES</code> å­—å…¸ï¼Œå¯¦ç¾ Config-Driven æ¶æ§‹ï¼Œæ˜“æ–¼æ“´å……ç¶­è­·ã€‚</p>
                <pre><code><span class="code-keyword">import</span> logging

<span class="code-comment"># è¨­å®šæ—¥èªŒ</span>
logging.basicConfig(level=logging.INFO, format=<span class="code-string">'%(asctime)s - %(message)s'</span>)

<span class="code-keyword">class</span> <span class="code-class">AlertStateMachine</span>:
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = <span class="code-string">"MONITORING"</span> <span class="code-comment"># å‡è¨­å·²ç¶“å•Ÿå‹•</span>

        <span class="code-comment"># ==========================================</span>
        <span class="code-comment"># 1. é€™è£¡å°±æ˜¯ã€Œè¨­å®šæª” (Config)ã€/ã€Œåƒ¹ç›®è¡¨ã€</span>
        <span class="code-comment"># æœªä¾†æœ‰ 100 ç¨®äº‹ä»¶ï¼Œåªè¦ä¾†æ”¹é€™è£¡å°±å¥½ï¼Œä¸ç”¨å‹•ä¸‹é¢çš„ç¨‹å¼ç¢¼</span>
        <span class="code-comment"># ==========================================</span>
        <span class="code-keyword">self</span>.EVENT_RULES = {
            <span class="code-comment"># æ ¼å¼ï¼š "äº‹ä»¶åç¨±": (é–€æª»å€¼, è­¦å ±è¨Šæ¯)</span>
            <span class="code-string">"ç«ç½"</span>: (<span class="code-number">0.50</span>, <span class="code-string">"æª¢æ¸¬åˆ°é«˜æº«ï¼Œå•Ÿå‹•ç‘æ°´ï¼"</span>),
            <span class="code-string">"å…¥ä¾µ"</span>: (<span class="code-number">0.80</span>, <span class="code-string">"æœ‰äººå“¡é—–å…¥ï¼Œé€šçŸ¥è­¦è¡›ï¼"</span>),
            <span class="code-string">"è·Œå€’"</span>: (<span class="code-number">0.90</span>, <span class="code-string">"è€äººè·Œå€’ï¼Œå‘¼å«æ•‘è­·è»Šï¼"</span>),
            <span class="code-string">"æŠ½è¸"</span>: (<span class="code-number">0.60</span>, <span class="code-string">"åµæ¸¬ç…™éœ§ï¼ŒèªéŸ³å‹¸å°ï¼"</span>),
            <span class="code-string">"åœ°éœ‡"</span>: (<span class="code-number">0.40</span>, <span class="code-string">"éœ‡åº¦ç•°å¸¸ï¼Œé–‹å•Ÿé€ƒç”Ÿé–€ï¼"</span>),
        }

    <span class="code-keyword">def</span> <span class="code-function">b</span>(<span class="code-keyword">self</span>, event):
        source = event.get(<span class="code-string">"source"</span>, <span class="code-string">"æœªçŸ¥"</span>)
        e_type = event.get(<span class="code-string">"type"</span>, <span class="code-string">"æœªçŸ¥"</span>)
        confidence = event.get(<span class="code-string">"confidence"</span>, <span class="code-number">0</span>)

        <span class="code-comment"># ==========================================</span>
        <span class="code-comment"># 2. é€™è£¡å°±æ˜¯ã€Œé€šç”¨é‚è¼¯ã€</span>
        <span class="code-comment"># ä¸ç®¡æ˜¯å“ªç¨®äº‹ä»¶ï¼Œéƒ½èµ°é€™ä¸€å¥—æµç¨‹</span>
        <span class="code-comment"># ==========================================</span>
        
        <span class="code-comment"># æ­¥é©Ÿ A: æŸ¥è¡¨ (å»å­—å…¸è£¡æ‰¾æœ‰æ²’æœ‰é€™å€‹äº‹ä»¶çš„è¨­å®š)</span>
        <span class="code-comment"># rule æŠ“å‡ºä¾†æœƒæ˜¯ (é–€æª», è¨Šæ¯)ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±å›å‚³ None</span>
        rule = <span class="code-keyword">self</span>.EVENT_RULES.get(e_type)

        <span class="code-comment"># æ­¥é©Ÿ B: å¦‚æœã€Œæ²’é€™æ¢è¦å‰‡ã€æˆ–æ˜¯ã€Œä¿¡å¿ƒä¸å¤ ã€ï¼Œå°±å¿½ç•¥</span>
        <span class="code-keyword">if</span> rule <span class="code-keyword">is</span> <span class="code-keyword">None</span>:
            logging.info(f<span class="code-string">"å¿½ç•¥ï¼šç³»çµ±ä¸èªè­˜é€™å€‹äº‹ä»¶ [{e_type}]"</span>)
            <span class="code-keyword">return</span>

        threshold = rule[<span class="code-number">0</span>] <span class="code-comment"># å–å¾—é–€æª» (ä¾‹å¦‚ 0.5)</span>
        message = rule[<span class="code-number">1</span>]   <span class="code-comment"># å–å¾—è¨Šæ¯ (ä¾‹å¦‚ "å•Ÿå‹•ç‘æ°´")</span>

        <span class="code-keyword">if</span> confidence < threshold:
            logging.info(f<span class="code-string">"å¿½ç•¥ï¼š[{e_type}] ä¿¡å¿ƒåº¦ {confidence} ä¸è¶³ (æ¨™æº–: {threshold})"</span>)
            <span class="code-keyword">return</span>

        <span class="code-comment"># æ­¥é©Ÿ C: æ¢ä»¶éƒ½ç¬¦åˆï¼Œè§¸ç™¼è­¦å ±ï¼</span>
        <span class="code-keyword">self</span>.state = <span class="code-string">"ALERTING"</span>
        logging.critical(f<span class="code-string">"ã€åš´é‡è­¦å ±ã€‘{e_type} | ä¾†æº: {source} | {message}"</span>)


<span class="code-comment"># ==========================================</span>
<span class="code-comment"># æ¸¬è©¦å€</span>
<span class="code-comment"># ==========================================</span>
s = AlertStateMachine()

<span class="code-function">print</span>(<span class="code-string">"--- æ¸¬è©¦ 1: ç«ç½ (é–€æª»åªè¦ 0.5) ---"</span>)
s.b({<span class="code-string">"source"</span>: <span class="code-string">"Sensor1"</span>, <span class="code-string">"type"</span>: <span class="code-string">"ç«ç½"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.6</span>}) 
<span class="code-comment"># çµæœï¼šæœƒéŸ¿ï¼å› ç‚º 0.6 >= 0.5</span>

<span class="code-function">print</span>(<span class="code-string">"\n--- æ¸¬è©¦ 2: è·Œå€’ (é–€æª»è¦å¾ˆé«˜ 0.9) ---"</span>)
s.b({<span class="code-string">"source"</span>: <span class="code-string">"Camera2"</span>, <span class="code-string">"type"</span>: <span class="code-string">"è·Œå€’"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.85</span>}) 
<span class="code-comment"># çµæœï¼šä¸éŸ¿ï¼Œå› ç‚º 0.85 é‚„æ²’åˆ° 0.9</span>

<span class="code-function">print</span>(<span class="code-string">"\n--- æ¸¬è©¦ 3: æœªçŸ¥äº‹ä»¶ (ä¸å†è¡¨ä¸­) ---"</span>)
s.b({<span class="code-string">"source"</span>: <span class="code-string">"Camera3"</span>, <span class="code-string">"type"</span>: <span class="code-string">"æœ‰äººæ‰“å™´åš"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.99</span>}) 
<span class="code-comment"># çµæœï¼šå¿½ç•¥ï¼Œå› ç‚ºå­—å…¸è£¡æ²’æœ‰ key æ˜¯ "æœ‰äººæ‰“å™´åš"</span></code></pre>
            </div>

            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code-compare"></i> Version 4: åˆ—èˆ‰èˆ‡æ¨¡å¼åŒ¹é… (Enum & Match-Case)</h4>
                    <span class="ver-badge ver-4">V4</span>
                </div>
                <p class="note-desc">é‡é»ï¼šä½¿ç”¨ <strong>Enum</strong> ç¢ºä¿ç‹€æ…‹å®‰å…¨æ€§ï¼Œä¸¦åˆ©ç”¨ Python 3.10+ çš„ <strong>match-case</strong> èªæ³•å„ªåŒ–çµæ§‹ã€‚</p>
                <pre><code><span class="code-keyword">import</span> logging
<span class="code-keyword">from</span> enum <span class="code-keyword">import</span> Enum, auto

<span class="code-comment"># è¨­å®š Log æ ¼å¼ï¼Œè®“è¼¸å‡ºæ›´æ¸…æ™°</span>
logging.basicConfig(
    level=logging.INFO,
    format=<span class="code-string">'%(asctime)s - [%(levelname)s] - %(message)s'</span>,
    datefmt=<span class="code-string">'%H:%M:%S'</span>
)

<span class="code-comment"># ä½¿ç”¨ Enum å®šç¾©ç‹€æ…‹ï¼Œé˜²æ­¢æ‰“éŒ¯å­—</span>
<span class="code-keyword">class</span> <span class="code-class">State</span>(Enum):
    IDLE = auto()       <span class="code-comment"># é–’ç½®</span>
    MONITORING = auto() <span class="code-comment"># ç›£æ§ä¸­</span>
    ALERTING = auto()   <span class="code-comment"># è­¦å ±éŸ¿èµ·ä¸­</span>
    STOPPED = auto()    <span class="code-comment"># å¼·åˆ¶åœæ­¢</span>

<span class="code-keyword">class</span> <span class="code-class">AlertStateMachine</span>:
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = State.IDLE

    <span class="code-comment"># å°æ‡‰æ¸¬è©¦çš„ start()</span>
    <span class="code-keyword">def</span> <span class="code-function">start</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = State.MONITORING
        logging.info(<span class="code-string">"ç³»çµ±ã€å•Ÿå‹•ç›£æ§ã€‘ Status -> MONITORING"</span>)

    <span class="code-comment"># å°æ‡‰æ¸¬è©¦çš„ stop()</span>
    <span class="code-keyword">def</span> <span class="code-function">stop</span>(<span class="code-keyword">self</span>):
        <span class="code-keyword">self</span>.state = State.STOPPED
        logging.warning(<span class="code-string">"ç³»çµ±ã€å¼·åˆ¶åœæ­¢ã€‘ Status -> STOPPED"</span>)

    <span class="code-comment"># å°æ‡‰æ¸¬è©¦çš„ handle_event()</span>
    <span class="code-keyword">def</span> <span class="code-function">handle_event</span>(<span class="code-keyword">self</span>, event):
        source = event.get(<span class="code-string">"source"</span>, <span class="code-string">"Unknown"</span>)
        evt_type = event.get(<span class="code-string">"type"</span>, <span class="code-string">"Unknown"</span>)
        confidence = event.get(<span class="code-string">"confidence"</span>, <span class="code-number">0.0</span>)

        <span class="code-comment"># ä½¿ç”¨ match-case è™•ç†ç‹€æ…‹é‚è¼¯ (Python 3.10+)</span>
        <span class="code-keyword">match</span> <span class="code-keyword">self</span>.state:
            <span class="code-comment"># Test 3: IDLE ç‹€æ…‹èª¤è§¸ -> å ±éŒ¯</span>
            <span class="code-keyword">case</span> State.IDLE:
                msg = f<span class="code-string">"ç³»çµ±æœªå•Ÿå‹• ({self.state.name})ï¼Œç„¡æ³•è™•ç†ä¾†è‡ª {source} çš„äº‹ä»¶"</span>
                logging.error(msg)
                <span class="code-keyword">raise</span> <span class="code-function">Exception</span>(msg)

            <span class="code-comment"># Test 5: STOPPED ç‹€æ…‹ -> åªç´€éŒ„ Log</span>
            <span class="code-keyword">case</span> State.STOPPED:
                logging.warning(f<span class="code-string">"ç³»çµ±å·²åœæ­¢ï¼Œå¿½ç•¥ä¾†è‡ª {source} çš„äº‹ä»¶"</span>)
                <span class="code-keyword">return</span>

            <span class="code-comment"># Test 4: ALERTING ç‹€æ…‹ -> å¿½ç•¥å¾ŒçºŒäº‹ä»¶</span>
            <span class="code-keyword">case</span> State.ALERTING:
                logging.info(f<span class="code-string">"ç³»çµ±å¿™ç¢Œä¸­ (å·²è§¸ç™¼è­¦å ±)ï¼Œå¿½ç•¥ä¾†è‡ª {source} çš„äº‹ä»¶"</span>)
                <span class="code-keyword">return</span>

            <span class="code-comment"># Test 1 & 2: MONITORING ç‹€æ…‹ -> æ­£å¸¸åˆ¤æ–·</span>
            <span class="code-keyword">case</span> State.MONITORING:
                <span class="code-comment"># åˆ¤æ–·é‚è¼¯ï¼šé¡å‹æ˜¯å…¥ä¾µ ä¸” ä¿¡å¿ƒåº¦ >= 0.8</span>
                <span class="code-keyword">if</span> evt_type == <span class="code-string">"å…¥ä¾µ"</span> <span class="code-keyword">and</span> confidence >= <span class="code-number">0.8</span>:
                    <span class="code-keyword">self</span>.state = State.ALERTING
                    logging.critical(f<span class="code-string">"ğŸš¨ è­¦å ±è§¸ç™¼ï¼ä¾†æº: {source} | ä¿¡å¿ƒåº¦: {confidence}"</span>)
                <span class="code-keyword">else</span>:
                    logging.info(f<span class="code-string">"PASS (æœªé”æ¨™) | ä¾†æº: {source} | ä¿¡å¿ƒåº¦: {confidence}"</span>)

<span class="code-comment"># ==========================================</span>
<span class="code-comment"># æ¸¬è©¦å€</span>
<span class="code-comment"># ==========================================</span>

<span class="code-function">print</span>(<span class="code-string">"=== æ¸¬è©¦ 1: æ­£å¸¸æŠ“åˆ°å…¥ä¾µ (é«˜ä¿¡å¿ƒ) ==="</span>)
bot1 = AlertStateMachine()
bot1.start() 
bot1.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam01"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.92</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\n=== æ¸¬è©¦ 2: å¿½ç•¥èª¤å ± (ä½ä¿¡å¿ƒ) ==="</span>)
bot2 = AlertStateMachine()
bot2.start()
bot2.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam01"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.4</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\n=== æ¸¬è©¦ 3: IDLE ç‹€æ…‹èª¤è§¸ (é æœŸå ±éŒ¯) ==="</span>)
bot3 = AlertStateMachine()
<span class="code-comment"># æ•…æ„ä¸å•Ÿå‹•</span>
<span class="code-keyword">try</span>:
    bot3.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam02"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.9</span>})
<span class="code-keyword">except</span> <span class="code-function">Exception</span> <span class="code-keyword">as</span> e:
    <span class="code-function">print</span>(f<span class="code-string">" âŒ æ””æˆªåˆ°éŒ¯èª¤: {e}"</span>)

<span class="code-function">print</span>(<span class="code-string">"\n=== æ¸¬è©¦ 4: è­¦å ±éŸ¿èµ·å¾Œï¼Œå¿½ç•¥å¾ŒçºŒäº‹ä»¶ ==="</span>)
bot4 = AlertStateMachine()
bot4.start()
<span class="code-function">print</span>(<span class="code-string">"[Step A] è§¸ç™¼è­¦å ±"</span>)
bot4.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam01"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.95</span>}) 
<span class="code-function">print</span>(<span class="code-string">"[Step B] å˜—è©¦å‚³å…¥æ–°äº‹ä»¶"</span>)
bot4.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam01"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.3</span>}) 

<span class="code-function">print</span>(<span class="code-string">"\n=== æ¸¬è©¦ 5: STOPPED ç‹€æ…‹ (åªå¯« Log) ==="</span>)
bot5 = AlertStateMachine()
bot5.stop() <span class="code-comment"># å…ˆå¼·åˆ¶åœæ­¢</span>
<span class="code-comment"># ä¸Ÿä¸€å€‹äº‹ä»¶é€²å»ï¼Œæ¸¬è©¦æœ‰æ²’æœ‰ä¹–ä¹–åªå¯« Log</span>
bot5.handle_event({<span class="code-string">"source"</span>: <span class="code-string">"Cam_Backdoor"</span>, <span class="code-string">"type"</span>: <span class="code-string">"å…¥ä¾µ"</span>, <span class="code-string">"confidence"</span>: <span class="code-number">0.99</span>})

<span class="code-function">print</span>(<span class="code-string">"\n--- å…¨éƒ¨æ¸¬è©¦å®Œæˆ ---"</span>)</code></pre>
            </div>

        </div>

    </main>

    <script>
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.overlay');
            
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-280px';
                overlay.style.display = 'none';
            } else {
                sidebar.style.left = '0px';
                overlay.style.display = 'block';
            }
        }
    </script>
</body>
</html>