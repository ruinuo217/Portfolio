<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reyna's Learning Dashboard - 02/04</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="dashboard.css">
    <style>
        /* --- 沿用之前的樣式 --- */
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            margin-top: 10px;
            white-space: pre-wrap;
            line-height: 1.6;
        }
        /* Python Syntax Highlighting */
        .code-keyword { color: #f92672; font-weight: bold; }
        .code-func { color: #66d9ef; }
        .code-string { color: #e6db74; }
        .code-class { color: #a6e22e; }
        .code-comment { color: #75715e; font-style: italic; }
        .code-num { color: #ae81ff; }
        
        .alert-box {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            color: #856404;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        .danger-box {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 10px;
            color: #721c24;
            margin: 10px 0;
            font-size: 0.9rem;
        }

        /* --- 表格樣式 --- */
        .concept-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        .concept-table th, .concept-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .concept-table th {
            background-color: #f4f4f4;
            color: #333;
            font-weight: bold;
        }
        
        /* --- 實作圖片樣式 --- */
        .practice-img {
            width: 100%;
            max-width: 600px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin: 10px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- 排版系統 --- */
        .grid-2-cols { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start; }
        
        @media (max-width: 768px) {
            .grid-2-cols { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="overlay" onclick="toggleSidebar()"></div>

    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>Reyna Portfolio</h2>
            <span>Data Analysis & AI</span>
        </div>

                <div class="menu-group">
            <div class="group-title">Week 1: 基礎導入</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1222.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/22 (一)</span><span class="topic">電腦基礎概論</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1223_1.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/23 (二) am</span><span class="topic">IT Career 職涯解析</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1223_2.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/23 (二) pm</span><span class="topic">ESP-01S 與 Arduino</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1224_1.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/24 (三) am</span><span class="topic">IoT 與 Web Server 實作</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1224_2.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/24 (三) pm</span><span class="topic">Linux 系統與應用</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1226.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/26 (五)</span><span class="topic">Linux基礎到架站</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 2: 深入實作</div>
            <ul>
                 <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1229.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/29 (一)</span><span class="topic">電腦基礎概論 II</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1230.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/30 (二)</span><span class="topic">NoCode 資料蒐集與自動化</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/1231.html"><span class="date-badge"><i class="far fa-calendar"></i> 12/31 (三)</span><span class="topic">Linux 資料庫建置</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0102.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/2 (五)</span><span class="topic">Linux 系統管理與腳本</span></a></li>
            </ul>
        </div>
        
        <div class="menu-group">
            <div class="group-title">Week 3: 資料庫與 Python</div>
            <ul>
                <li><a href="#"><span class="date-badge"><i class="far fa-calendar"></i> 1/5 (一)</span><span class="topic">計算機概論 (待補)</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0106.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/6 (二)</span><span class="topic">MySQL 安裝與 SSH 穿隧</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0107.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/7 (三)</span><span class="topic">MySQL 管理與 VS Code</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0108.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/8 (四)</span><span class="topic">Python 基礎與環境</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0109.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/9 (五)</span><span class="topic">Python 進階與資料處理</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 4: Python 與 SQL</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0112.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/12 (一)</span><span class="topic">Python 函數與異常處理</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0113.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/13 (二)</span><span class="topic">OOP 與 記憶體管理</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0114.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/14 (三)</span><span class="topic">MySQL 語法與資料操作</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0115.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/15 (四)</span><span class="topic">MySQL 進階查詢與實作</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 5: 商業智慧與網頁基礎</div>
            <ul>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0120.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/20 (二) </span>
                        <span class="topic">Tableau 基礎與視覺化</span>
                    </a>
                </li>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0121.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/21 (三) </span>
                        <span class="topic">Tableau 進階分析</span>
                    </a>
                </li>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0122.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/22 (四) </span>
                        <span class="topic">HTML 基礎與表單設計</span>
                    </a>
                </li>
                <li>
                    <a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0123.html">
                        <span class="date-badge"><i class="far fa-calendar"></i> 1/23 (五) </span>
                        <span class="topic">CSS 樣式設計全攻略</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 6: 網路爬蟲與資料擷取</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0126.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/26 (一) </span><span class="topic">網路爬蟲基礎與 requests</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0127.html"><span class="date-badge"><i class="far fa-calendar"></i> 1/27 (二) </span><span class="topic">Selenium 動態爬蟲</span></a></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="group-title">Week 7: 資料分析與 Pandas</div>
            <ul>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0202.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/2 (一) </span><span class="topic">Pandas 基礎與資料結構</span></a></li>
                <li><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0203.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/3 (二) </span><span class="topic">Pandas 進階與 NumPy</span></a></li>
                <li class="active"><a href="https://ruinuo217.github.io/Portfolio/ai-data-course/0204.html"><span class="date-badge"><i class="far fa-calendar"></i> 2/4 (三) </span><span class="topic">NumPy 進階與維度操作</span></a></li>
            </ul>
        </div>
    </nav>

   <main class="main-content">
     
        <div class="top-bar">
            <div class="breadcrumb">
                首頁 > Week 7 > <span>NumPy 進階與維度操作</span>
            </div>
            <a href="https://ruinuo217.github.io/Portfolio/" class="btn-nav" style="text-decoration: none;">
                <i class="fas fa-home"></i> 回首頁
            </a>
        </div>
        
        <div class="banner" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <div>
                <h1>NumPy 進階操作</h1>
                <p>廣播 (Broadcast)、遮罩 (Masking)、重塑 (Reshape) 與維度變換。</p>
            </div>
            <i class="fa-solid fa-layer-group banner-icon"></i>
        </div>

        <h3 class="section-title">Part 1: 廣播與批次處理 (Broadcasting)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-wifi"></i> 什麼是廣播 (Broadcast)？</h4>
                    <span class="status-badge important">核心</span>
                </div>
                <p class="note-desc">定義：將「一組規則」一次套用到「一整批資料」，自動對齊 Shape，完全不使用 for-loop。</p>
                
                <div class="grid-2-cols">
                    <div>
                        <h5 style="margin-bottom:10px;">運作原理</h5>
                        <p>當兩個 Array 形狀不同時，NumPy 會自動「擴展」較小的 Array 以匹配較大的 Array。</p>
                        <pre><code><span class="code-comment"># (4, 3) * (3,) -> 自動擴展</span>
event_data = np.<span class="code-func">array</span>([
    [<span class="code-num">0.92</span>, <span class="code-num">800</span>, <span class="code-num">1.0</span>],
    [<span class="code-num">0.76</span>, <span class="code-num">300</span>, <span class="code-num">1.0</span>]
])
weights = np.<span class="code-func">array</span>([<span class="code-num">1.0</span>, <span class="code-num">0.01</span>, <span class="code-num">2.0</span>])

<span class="code-comment"># 一次套用權重</span>
result = event_data * weights</code></pre>
                    </div>
                    <div>
                         <h5 style="margin-bottom:10px;">為什麼要用？</h5>
                         <ul class="step-list">
                             <li><strong>效能：</strong> 底層 C 語言執行，比 Python Loop 快數十倍。</li>
                             <li><strong>簡潔：</strong> 程式碼更短，邏輯更清晰。</li>
                             <li><strong>系統化：</strong> 適合處理 AI 模型的 Batch Input。</li>
                         </ul>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="section-title">Part 2: 迭代與條件篩選 (Iterating vs Masking)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-ban"></i> 避免使用 Iterating</h4>
                    <span class="status-badge danger">警示</span>
                </div>
                <p class="note-desc"><code>for x in np.nditer(a):</code> 是合法的，但在 AI 系統中是<strong>不推薦</strong>的。</p>
                <div class="danger-box">
                    <strong>為什麼？</strong><br>
                    逐筆進入 Python 解譯器會破壞 NumPy 的向量化優勢，導致效能低落。
                </div>
            </div>

            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-filter"></i> 條件遮罩 (Boolean Masking)</h4>
                    <span class="status-badge running">推薦</span>
                </div>
                <p class="note-desc">用邏輯運算一次選出符合條件的資料。</p>
                <pre><code><span class="code-comment"># 找出 Valid 事件</span>
<span class="code-comment"># 條件：信心度 >= 0.8 且 面積 >= 500</span>
mask = (conf >= <span class="code-num">0.8</span>) & (area >= <span class="code-num">500</span>)

valid_ids = event_id[mask]</code></pre>
            </div>
        </div>

        <h3 class="section-title">Part 3: 陣列重塑與還原 (Reshape & Flatten)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-shapes"></i> Reshape 結構還原</h4>
                    <span class="status-badge advanced">操作</span>
                </div>
                <p class="note-desc">把「沒有語意的一維資料流」還原成「有結構的矩陣」。</p>
                <pre><code><span class="code-comment"># 1D 事件流 -> (時間, ROI) 矩陣</span>
matrix = stream.<span class="code-func">reshape</span>(<span class="code-num">4</span>, <span class="code-num">5</span>)

<span class="code-comment"># 自動推算維度 (-1)</span>
matrix = stream.<span class="code-func">reshape</span>(-<span class="code-num">1</span>, <span class="code-num">5</span>)</code></pre>
            </div>

            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-arrow-down-up-across-line"></i> Flatten vs Ravel</h4>
                </div>
                <table class="concept-table">
                    <tr><th>方法</th><th>特性</th><th>影響</th></tr>
                    <tr><td><code>flatten()</code></td><td>回傳<strong>副本 (Copy)</strong></td><td>修改不影響原陣列 (安全)。</td></tr>
                    <tr><td><code>ravel()</code></td><td>回傳<strong>視圖 (View)</strong></td><td>修改<strong>會影響</strong>原陣列 (效能快)。</td></tr>
                </table>
            </div>
        </div>

        <h3 class="section-title">Part 4: 軸的轉換 (Transpose & Swapaxes)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-rotate"></i> 解決維度順序錯亂</h4>
                    <span class="status-badge advanced">Debug</span>
                </div>
                <div class="grid-2-cols">
                    <div>
                        <h5 style="margin-bottom:10px;">轉置 (Transpose)</h5>
                        <p>適用於 2D 矩陣，行變列，列變行。</p>
                        <pre><code>a = np.arange(<span class="code-num">12</span>).reshape(<span class="code-num">3</span>, <span class="code-num">4</span>)
print(a.T) <span class="code-comment"># 變成 (4, 3)</span></code></pre>
                    </div>
                    <div>
                        <h5 style="margin-bottom:10px;">軸交換 (Swapaxes)</h5>
                        <p>適用於 3D+ 資料，修正資料維度順序 (例如：把 ROI 和 Feature 對調)。</p>
                        <pre><code><span class="code-comment"># 原始: (ROI, Feature, Time)</span>
<span class="code-comment"># 目標: (Time, ROI, Feature)</span>
swapped = np.<span class="code-func">swapaxes</span>(data, <span class="code-num">0</span>, <span class="code-num">2</span>)</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="section-title">Part 5: 核心觀念辨析 (Concept)</h3>
        <div class="dashboard-grid notes-section">
            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-brain"></i> 事件 vs 影像 vs 陣列</h4>
                    <span class="status-badge important">必讀</span>
                </div>
                <table class="concept-table">
                    <tr><th>層級</th><th>資料長怎樣 (Shape)</th><th>本質</th><th>問題</th></tr>
                    <tr><td><strong>影像 (Image)</strong></td><td><code>(H, W, 3)</code></td><td>空間上的像素分布</td><td>畫面長怎樣？</td></tr>
                    <tr><td><strong>陣列 (Array)</strong></td><td><code>[[...], [...]]</code></td><td>資料的儲存結構 (容器)</td><td>資料怎麼存？</td></tr>
                    <tr><td><strong>事件 (Event)</strong></td><td><code>{time, person, violation}</code></td><td>語意 + 時間</td><td>發生了什麼事？</td></tr>
                </table>
            </div>
        </div>

        <h3 class="section-title">Part 6: Reyna's Workshop 實作紀錄</h3>
        <div class="dashboard-grid notes-section">
            
            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code"></i> 練習 01: Boolean Indexing</h4>
                </div>
                <p class="note-desc">使用條件篩選出高風險事件。</p>
                <img src="https://hackmd.io/_uploads/B1HvsXxwbg.png" alt="Boolean Indexing" class="practice-img">
                <pre><code>high_risk = confidence >= <span class="code-num">0.8</span>
selected = confidence[high_risk]
<span class="code-func">print</span>(selected)</code></pre>
            </div>

            <div class="card note-card">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code"></i> 練習 02: Argmax (Axis)</h4>
                </div>
                <p class="note-desc">沿著不同軸 (Axis 0 vs Axis 1) 尋找最大值的索引。</p>
                <img src="https://hackmd.io/_uploads/SJFvlElD-e.png" alt="Argmax" class="practice-img">
                <pre><code><span class="code-func">print</span>(np.<span class="code-func">argmax</span>(risk, axis=<span class="code-num">0</span>))
<span class="code-func">print</span>(np.<span class="code-func">argmax</span>(risk, axis=<span class="code-num">1</span>))</code></pre>
            </div>

            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code"></i> 練習 03: 廣播應用 (Broadcasting)</h4>
                </div>
                <div class="grid-2-cols">
                    <div>
                        <p class="note-desc">計算加權分數：將權重 Array 自動套用到每一筆事件，不使用迴圈。</p>
                        <pre><code>weights = np.<span class="code-func">array</span>([<span class="code-num">1.0</span>, <span class="code-num">0.01</span>, <span class="code-num">2.0</span>])
weighted_scores = event_data * weights</code></pre>
                    </div>
                    <div>
                        <img src="https://hackmd.io/_uploads/S1RrcNeDWg.png" alt="Broadcasting" class="practice-img">
                    </div>
                </div>
            </div>

            <div class="card note-card" style="grid-column: 1 / -1;">
                <div class="note-header">
                    <h4><i class="fa-solid fa-code"></i> 練習 04: 事件分類 (Logic Masking)</h4>
                </div>
                <div class="grid-2-cols">
                    <div>
                        <p class="note-desc">結合多個邏輯條件 (AND/OR)，將事件分類為 Valid, Low Risk, Ignore。</p>
                        <pre><code>Valid = (confidence >= <span class="code-num">0.8</span>) & (area >= <span class="code-num">500</span>)
Low_Risk = (confidence >= <span class="code-num">0.5</span>) & (area < <span class="code-num">500</span>)
Ignore = (confidence < <span class="code-num">0.5</span>)</code></pre>
                    </div>
                    <div>
                        <img src="https://hackmd.io/_uploads/HyTU1rxvWl.png" alt="Event Classification" class="practice-img">
                    </div>
                </div>
            </div>

        </div>

    </main>

    <script>
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.overlay');
            
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-280px';
                overlay.style.display = 'none';
            } else {
                sidebar.style.left = '0px';
                overlay.style.display = 'block';
            }
        }
    </script>
</body>
</html>